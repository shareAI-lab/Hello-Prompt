#!/bin/bash

echo "ğŸš€ Hello Prompt v2 - å®Œæ•´åŠŸèƒ½æ¼”ç¤º"
echo "================================="
echo ""
echo "âœ… å·²å®ç°çš„æ ¸å¿ƒåŠŸèƒ½ï¼š"
echo "   ğŸ™ï¸  Ctrl+U å…¨å±€å¿«æ·é”®è§¦å‘å½•éŸ³"
echo "   ğŸ”µ  ç±»Siriå½•éŸ³ç•Œé¢å’ŒéŸ³é¢‘åé¦ˆ"
echo "   ğŸ¤–  OpenAI Whisper è¯­éŸ³è¯†åˆ« (é…ç½®APIåå¯ç”¨)"
echo "   ğŸ“  GPT æç¤ºè¯ä¼˜åŒ– (é…ç½®APIåå¯ç”¨)"
echo "   âš¡  å®Œæ•´çš„æƒé™ç®¡ç†å’Œé”™è¯¯å¤„ç†"
echo "   ğŸ“±  ç›´è§‚çš„ç”¨æˆ·ç•Œé¢å’ŒçŠ¶æ€åé¦ˆ"
echo ""

# æ£€æŸ¥ç³»ç»Ÿ
if [[ "$OSTYPE" != "darwin"* ]]; then
    echo "âŒ æ­¤åº”ç”¨åªèƒ½åœ¨macOSä¸Šè¿è¡Œ"
    exit 1
fi

echo "ğŸ“¦ å¯åŠ¨åº”ç”¨è¿›è¡Œå®Œæ•´åŠŸèƒ½æ¼”ç¤º..."
echo ""
echo "ğŸ¯ æµ‹è¯•åŠŸèƒ½åˆ—è¡¨ï¼š"
echo "   1. ğŸ”‘ æƒé™ç®¡ç† - éº¦å…‹é£å’Œè¾…åŠ©åŠŸèƒ½æƒé™"
echo "   2. âŒ¨ï¸  å¿«æ·é”®æµ‹è¯• - æŒ‰ Ctrl+U è§¦å‘å½•éŸ³"
echo "   3. ğŸ¤ å½•éŸ³åŠŸèƒ½ - é«˜è´¨é‡éŸ³é¢‘å½•åˆ¶å’ŒVADæ£€æµ‹"
echo "   4. ğŸªŸ Siriç•Œé¢ - å½•éŸ³è¦†ç›–çª—å£æ˜¾ç¤º"
echo "   5. ğŸ”„ å·¥ä½œæµç¨‹ - å®Œæ•´çš„è¯­éŸ³è½¬æç¤ºè¯æµç¨‹"
echo "   6. âš™ï¸  è®¾ç½®ç•Œé¢ - OpenAI APIé…ç½®"
echo ""
echo "ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š"
echo "   â€¢ åº”ç”¨å¯åŠ¨åï¼Œå¦‚æœæƒé™ä¸è¶³ä¼šæ˜¾ç¤ºæƒé™ç”³è¯·ç•Œé¢"
echo "   â€¢ æŒ‰ Ctrl+U ä¼šç«‹å³å¼¹å‡º'å¿«æ·é”®æµ‹è¯•'å¯¹è¯æ¡†ç¡®è®¤å“åº”"
echo "   â€¢ ç„¶åæ˜¾ç¤ºSirié£æ ¼çš„å½•éŸ³ç•Œé¢åœ¨å±å¹•ä¸­å¤®"
echo "   â€¢ è¯´è¯ååœé¡¿0.5ç§’ä¼šè‡ªåŠ¨åœæ­¢å½•éŸ³"
echo "   â€¢ å¦‚æœªé…ç½®OpenAI APIï¼Œä¼šæ˜¾ç¤ºå ä½ç¬¦ç»“æœæ¼”ç¤ºæµç¨‹"
echo "   â€¢ åœ¨è®¾ç½®ç•Œé¢å¯ä»¥é…ç½®çœŸæ­£çš„OpenAI APIå¯†é’¥"
echo ""
echo "ğŸ”§ å…³é”®ä¿®å¤ï¼š"
echo "   âœ… è§£å†³äº†SwiftUIå…¼å®¹æ€§é—®é¢˜"
echo "   âœ… ä¿®å¤äº†å¿«æ·é”®æ— å“åº”çš„é—®é¢˜"
echo "   âœ… å®ç°äº†å®Œæ•´çš„LLM APIæ¶¦è‰²æµç¨‹"
echo "   âœ… åˆ›å»ºäº†ç±»Siriçš„å½•éŸ³UIä½“éªŒ"
echo "   âœ… æ·»åŠ äº†å…¨é¢çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—"
echo ""
echo "ğŸš€ å¯åŠ¨åº”ç”¨..."
echo "=================="

# å¯åŠ¨åº”ç”¨å¹¶æ˜¾ç¤ºå®æ—¶æ—¥å¿—ï¼Œçªå‡ºæ˜¾ç¤ºé‡è¦äº‹ä»¶
./.build/debug/HelloPromptV2 2>&1 | while IFS= read -r line; do
    case "$line" in
        *"ğŸ™ï¸ å¿«æ·é”®è§¦å‘"*)
            echo "ğŸ¯ $line" ;;
        *"å¿«æ·é”®æ³¨å†ŒæˆåŠŸ"*)
            echo "ğŸ¹ $line" ;;
        *"æ˜¾ç¤ºå½•éŸ³ç•Œé¢"*)
            echo "ğŸ¬ $line" ;;
        *"å½•éŸ³"*"å®Œæˆ"*)
            echo "âœ… $line" ;;
        *"ä¼˜åŒ–å®Œæˆ"*)
            echo "ğŸ¤– $line" ;;
        *"ERROR"*|*"é”™è¯¯"*)
            echo "âŒ $line" ;;
        *"WARNING"*|*"è­¦å‘Š"*)
            echo "âš ï¸  $line" ;;
        *"INFO"*"æƒé™"*)
            echo "ğŸ” $line" ;;
        *"åº”ç”¨å¯åŠ¨å®Œæˆ"*)
            echo "ğŸ‰ $line" ;;
        *)
            echo "$line" ;;
    esac
done
# Hello Prompt - 项目规格说明文档

本目录包含Hello Prompt项目的完整规格说明文档，用于指导Claude Code和其他AI工具进行项目开发和维护。

## 文档结构

```
specs/
├── SPECS.md           # 本文档 - 规格说明总览
├── PRD_v1.md          # 产品需求文档 V1.0
├── TD_v1.md           # 技术设计文档 V1.0
├── CodeStyle_v1.md    # 代码风格文档 V1.0
└── [future_specs].md  # 未来功能规格文档
```

## 项目概述

**Hello Prompt** 是一款极简的macOS语音到AI提示词转换工具。核心功能是通过快捷键激活语音输入，将语音转换为专业的AI提示词，并提供美观的确认界面。

### 核心价值
- **3秒流程**：将模糊的语音想法转换为精确的AI提示词，整个流程在3秒内完成
- **全局可用**：支持任何应用的快捷键激活和文本插入
- **专业优化**：使用OpenAI Whisper + GPT-4进行高质量语音识别和提示词优化

### 目标用户
- **开发者**：在IDE中快速生成代码提示词
- **设计师**：快速生成图像创作提示词  
- **内容创作者**：生成文章写作提示词

## 技术架构概览

### 系统架构
采用简化的三层架构设计：
- **UI Layer**: SwiftUI界面层 (FloatingBall, ResultOverlay, SettingsView)
- **Service Layer**: 业务逻辑层 (AudioService, OpenAIService, AppManager) 
- **Foundation Layer**: 系统接口层 (AVFoundation, Keychain, HotkeyAPI)

### 技术栈
- **开发语言**: Swift 5.10+ (Xcode 15.0+)
- **UI框架**: SwiftUI (主界面) + AppKit (系统集成)
- **音频处理**: AVFoundation + AudioKit
- **网络层**: Foundation URLSession
- **状态管理**: Combine + ObservableObject

## 核心功能模块

### 1. 语音录制功能
- 全局快捷键启动 (默认Ctrl+M)
- 智能语音活动检测(VAD)
- 自动停止录制(500ms静音检测)
- 专业音频配置(16kHz单声道)

### 2. AI处理功能  
- OpenAI Whisper API语音识别
- GPT-4提示词优化
- 3秒内完成端到端处理
- 支持中英文混合识别

### 3. 结果展示功能
- 半透明全屏蒙版展示
- 毛玻璃效果中央卡片
- 支持文本滚动和快捷键操作
- 美观的macOS原生设计

### 4. 文本插入功能  
- 自动检测当前活跃应用
- 支持主流应用(Xcode, VS Code, 浏览器等)
- 使用剪贴板或可访问性API插入
- 95%+应用兼容率

### 5. 语音修改功能
- 按Space键进入修改模式
- 支持多轮语音修改
- 返回完整修改后提示词
- 智能理解修改需求

## 质量与性能要求

### 性能指标
- **启动时间**: ≤2秒 (冷启动)
- **内存占用**: 空闲≤50MB，峰值≤100MB  
- **响应时间**: 快捷键响应≤100ms
- **处理时延**: 语音转提示词≤3秒
- **识别准确率**: ≥95%

### 代码质量
- SwiftLint通过率100%
- 测试覆盖率≥80%
- 符合macOS设计规范
- 连续使用8小时无崩溃

## 文档引用方式

### 在Claude Code对话中引用规格文档
```text
@[specs/PRD_v1.md]        # 引用产品需求文档
@[specs/TD_v1.md]         # 引用技术设计文档  
@[specs/CodeStyle_v1.md]  # 引用代码风格文档
```

### 使用Prime命令加载项目上下文
```text
/project:prime
```
执行后Claude将自动加载项目结构和关键文档。

## 开发最佳实践

### 音频处理
- 使用16kHz单声道格式优化API调用
- 实现专业VAD算法提高检测精度
- 采用噪声抑制和自动增益控制
- 缓冲池管理优化内存使用

### API调用优化
- 实现指数退避重试机制
- 音频数据压缩(>25MB时)
- 连接复用和HTTP/2优化
- 结构化错误处理体系

### UI/UX设计
- 遵循macOS Human Interface Guidelines
- 毛玻璃效果和原生动画
- 响应式布局适配不同屏幕
- 无障碍功能支持

## 版本规划

### V1.0 (当前版本)
- 核心语音转提示词功能
- 基础UI和配置界面
- OpenAI API集成
- 基础错误处理

### V1.1 (优化版本)  
- 性能优化和稳定性提升
- 更多应用兼容性支持
- 用户反馈优化
- 本地缓存机制

### V2.0 (增强版本)
- 本地语音模型支持
- 模板系统
- 使用统计分析
- 团队配置同步

## 文档维护

### 更新原则
1. **及时更新**: 代码变更时同步更新文档
2. **版本控制**: 使用语义化版本号
3. **变更记录**: 详细记录每次修改内容
4. **一致性检查**: 定期检查文档间的一致性

### 文档状态
- **PRD_v1.md**: 开发版本 (2025-07-25)
- **TD_v1.md**: 开发版本 (2025-07-25)  
- **CodeStyle_v1.md**: 开发版本 (2025-07-25)
- **SPECS.md**: 当前版本 (2025-07-25)

---

**使用说明**: 
1. 开发新功能前，先查阅相关规格文档
2. 使用`@[specs/文档名.md]`在Claude对话中引用文档
3. 代码变更后及时更新对应规格文档
4. 新功能开发完成后创建对应的规格文档